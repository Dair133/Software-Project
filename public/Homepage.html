<!DOCTYPE html>
<html lang="en">
<head>
  <div style = "text-align: center;text-decoration:underline;">Place holder home page.(After signing in 
    you will be redirected to this page. The page will not function correctly unless you sign in first) </div>
  
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type = "module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.1/firebase-app.js";
       import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.0.1/firebase-analytics.js";
       import { getFirestore,doc,getDocs,getDoc} from "https://www.gstatic.com/firebasejs/9.0.1/firebase-firestore.js";
     
     
         </script>
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/9.13.0/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/9.13.0/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-functions-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-messaging-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-analytics-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-remote-config-compat.js"></script>
    <script defer src="/__/firebase/9.13.0/firebase-performance-compat.js"></script>
    <script defer src="/__/firebase/init.js"></script>
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  
    <script>
      
       document.addEventListener('DOMContentLoaded', function() {
        const loadEl = document.querySelector('#load');
        //var holder
  //db.collection("Users").get().then(function(querySnapshot) {
  // console.log(typeof(querySnapshot.size))
 //});
        // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
        // // The Firebase SDK is initialized and available here!
        //
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
        // firebase.firestore().doc('/foo/bar').get().then(() => { });
        // firebase.functions().httpsCallable('yourFunction')().then(() => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        // firebase.analytics(); // call to activate
        // firebase.analytics().logEvent('tutorial_completed');
        // firebase.performance(); // call to activate
        //
        // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

        try {
          let app = firebase.app();
          let features = [
            'auth', 
            'database', 
            'firestore',
            'functions',
            'messaging', 
            'storage', 
            'analytics', 
            'remoteConfig',
            'performance',
          ].filter(feature => typeof app[feature] === 'function');
          loadEl.textContent = `Firebase SDK loaded with ${features.join(', ')}`;
        } catch (e) {
          //console.error(e);
          //loadEl.textContent = 'Error loading the Firebase SDK, check the console.';
        }
        //test()
        functionsTest();
        auth()
      });
      
    </script>
  <button id = signOut onclick = signOut() >Sign Out</button>
  <button id = signOut onclick = AccountPage() >Account Page</button>

</head>
<body>
   
    <div id = "login"style = "text-align: center;text-decoration: underline;"</div>
<script>
      //window.load = auth();
function test(){
  console.log("This is the test function")
  const user = firebase.auth().currentUser;
console.log(user.displayName)
}

function auth(){
  console.log(123434546456)
  
  firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    console.log(user.displayName)
   document.getElementById("login").innerHTML ="Welcome back "+user.displayName+".You are now on the home page"
  } else {
    // User is not signed in.
  }
});

//wait(2000)

  //document.getElementById("login").innerHTML ="Your display name is "+user.displayName
 
  
}
function signOut(){
  firebase.auth().signOut().then(function() {
    window.location = "authsignIn.html";
  console.log('Signedzz Out');
}, function(error) {
  console.error('Sign Out Error', error);
});


}
function AccountPage(){
  window.location = "accountPage.html"
}

function functionsTest(){
   //var functions = firebase.functions();
  var addMessage = firebase.functions().httpsCallable('addMessage');
addMessage({text:"authSignIn.html"})
  .then((result) => {
    console.log(result)
  
  });
}

   </script>
</body>
</html>